var v=Object.defineProperty;var a=t=>{throw TypeError(t)};var f=(t,s,e)=>s in t?v(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var o=(t,s,e)=>f(t,typeof s!="symbol"?s+"":s,e),c=(t,s,e)=>s.has(t)||a("Cannot "+e);var d=(t,s,e)=>(c(t,s,"read from private field"),e?e.call(t):s.get(t)),l=(t,s,e)=>s.has(t)?a("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,e),h=(t,s,e,i)=>(c(t,s,"write to private field"),i?i.call(t,e):s.set(t,e),e);var n;class g{constructor(){l(this,n,[]);this.dispose=this.dispose.bind(this)}addDisposable(s){return d(this,n).push(s),s}dispose(){for(const s of d(this,n))s.dispose();h(this,n,[])}}n=new WeakMap;class E{constructor(){o(this,"listeners",[]);o(this,"event",(s,e,...i)=>{const u={listener:s,thisArg:e,args:i};return this.addEventListener(u)});this.event=this.event.bind(this)}addEventListener(s){this.listeners.push(s);const e=()=>{const i=this.listeners.indexOf(s);i!==-1&&this.listeners.splice(i,1)};return e.dispose=e,e}fire(s){for(const e of this.listeners.slice())e.listener.call(e.thisArg,s,...e.args)}dispose(){this.listeners.length=0}}const p=Symbol("undefined");var r;class m extends E{constructor(){super(...arguments);l(this,r,p)}addEventListener(e){return d(this,r)!==p&&e.listener.call(e.thisArg,d(this,r),...e.args),super.addEventListener(e)}fire(e){h(this,r,e),super.fire(e)}}r=new WeakMap;export{g as A,E,m as S};
