var B=Object.defineProperty;var W=a=>{throw TypeError(a)};var D=(a,t,e)=>t in a?B(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var S=(a,t,e)=>D(a,typeof t!="symbol"?t+"":t,e),x=(a,t,e)=>t.has(a)||W("Cannot "+e);var r=(a,t,e)=>(x(a,t,"read from private field"),e?e.call(a):t.get(a)),o=(a,t,e)=>t.has(a)?W("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,e),u=(a,t,e,s)=>(x(a,t,"write to private field"),s?s.call(a,e):t.set(a,e),e);import{d as M}from"./struct-deserialize-bkGssrR1.js";import{B as U,g as X,C as Y,P as Z,a as $,h as ee,t as te}from"./struct-deserialize-bkGssrR1.js";import{t as R,M as v,g as z}from"./distribution-vvPj2d0I.js";import{B as se,C as re,a as ie,D as oe}from"./distribution-vvPj2d0I.js";import{W as w,R as O,P as F,T as _}from"./stream-BT4ImN5b.js";import{A as ce}from"./stream-BT4ImN5b.js";import{T as ue,a as be}from"./encoding-D3q_jWej.js";import{I as fe,S as he}from"./split-string-NR4_hcTk.js";class j extends w{constructor(t){const e=t.getWriter();super({write(s){return R(s,i=>e.write(i))},abort(s){return e.abort(s)},close(){return e.close()}})}}const G=Object.freeze(Object.defineProperty({__proto__:null,WrapWritableStream:j,WritableStream:v,getValue:z,tryConsume:R},Symbol.toStringTag,{value:"Module"}));function q(a,t){return"start"in a?a.start(t):typeof a=="function"?a(t):a}var b;class A extends O{constructor(e,s){super({start:async i=>{const l=await q(e,i);this.readable=l,u(this,b,this.readable.getReader())},pull:async i=>{var g;const{done:l,value:P}=await r(this,b).read().catch(C=>{throw"error"in e&&e.error(C),C});l?(i.close(),"close"in e&&await((g=e.close)==null?void 0:g.call(e))):i.enqueue(P)},cancel:async i=>{var l;await r(this,b).cancel(i),"cancel"in e&&await((l=e.cancel)==null?void 0:l.call(e,i))}},s);S(this,"readable");o(this,b)}}b=new WeakMap;const T=()=>{};var f,h,n,d,m;class H{constructor(t){o(this,f,[]);o(this,h,[]);o(this,n,!1);o(this,d,new F);o(this,m);u(this,m,t??{})}get writableClosed(){return r(this,n)}get closed(){return r(this,d).promise}wrapReadable(t,e){return new A({start:s=>(r(this,f).push(s),t),cancel:async()=>{await this.close()},close:async()=>{await this.dispose()}},e)}createWritable(t){const e=t.getWriter();return r(this,h).push(e),new w({write:async s=>{await e.write(s)},abort:async s=>{await e.abort(s),await this.close()},close:async()=>{await e.close().catch(T),await this.close()}})}async close(){var t,e;if(!r(this,n)){u(this,n,!0),await((e=(t=r(this,m)).close)==null?void 0:e.call(t))!==!1&&await this.dispose();for(const s of r(this,h))s.close().catch(T)}}async dispose(){var t,e;u(this,n,!0),r(this,d).resolve();for(const s of r(this,f))M(s);await((e=(t=r(this,m)).dispose)==null?void 0:e.call(t))}}f=new WeakMap,h=new WeakMap,n=new WeakMap,d=new WeakMap,m=new WeakMap;function J(a,t){const e=t.writable.getWriter(),s=t.readable.pipeTo(a);return new w({async write(i){await e.write(i)},async close(){await e.close(),await s}})}class K extends _{constructor(t){super({transform(e,s){s.enqueue(t.serialize(e))}})}}async function I(a){return"start"in a?await a.start():typeof a=="function"?await a():a}var c;const y=class y extends w{constructor(e){super({start:async()=>{const s=await I(e);this.writable=s,u(this,c,this.writable.getWriter())},write:async s=>{await r(this,c).write(s)},abort:async s=>{var i;await r(this,c).abort(s),e!==this.writable&&"close"in e&&await((i=e.close)==null?void 0:i.call(e))},close:async()=>{var s;await r(this,c).close(),e!==this.writable&&"close"in e&&await((s=e.close)==null?void 0:s.call(e))}});S(this,"writable");o(this,c)}bePipedThroughFrom(e){let s;return new y({start:()=>(s=e.readable.pipeTo(this),e.writable),async close(){await s}})}};c=new WeakMap;let p=y;export{ce as AbortController,se as BufferCombiner,U as BufferedReadableStream,X as BufferedTransformStream,re as ConcatBufferStream,ie as ConcatStringStream,Y as Consumable,oe as DistributionStream,H as DuplexStreamFactory,fe as InspectStream,G as MaybeConsumable,Z as PushReadableStream,O as ReadableStream,he as SplitStringStream,$ as StructDeserializeStream,K as StructSerializeStream,ue as TextDecoderStream,be as TextEncoderStream,_ as TransformStream,A as WrapReadableStream,p as WrapWritableStream,w as WritableStream,ee as createTask,J as pipeFrom,te as tryCancel,M as tryClose};
